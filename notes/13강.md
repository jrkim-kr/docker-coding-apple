# 13. Docker compose 3. ì‹¤ì‹œê°„ ê°œë°œ, graceful shutdown

# í•µì‹¬ ì •ë¦¬

## ğŸ¯ í•™ìŠµ ëª©í‘œ

ì´ íŠœí† ë¦¬ì–¼ì„ ë§ˆì¹˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- Docker Composeì˜ Watch ê¸°ëŠ¥ì„ í™œìš©í•œ ì‹¤ì‹œê°„ ê°œë°œ í™˜ê²½ êµ¬ì¶•
- ì»¨í…Œì´ë„ˆì˜ Graceful Shutdown êµ¬í˜„
- ìë™ ë¹Œë“œ ì„¤ì •ìœ¼ë¡œ ê°œë°œ ì›Œí¬í”Œë¡œìš° ê°œì„ 
- í”„ë¡œë•ì…˜ê³¼ ë™ì¼í•œ í™˜ê²½ì—ì„œ í¸ë¦¬í•˜ê²Œ ê°œë°œí•˜ê¸°

---

## ğŸ“š ì‚¬ì „ ì§€ì‹

- Docker Compose ê¸°ë³¸ ì‚¬ìš©ë²•
- Node.js ë˜ëŠ” ê¸°íƒ€ ì›¹ í”„ë ˆì„ì›Œí¬ ê¸°ì´ˆ
- Signalê³¼ Processì— ëŒ€í•œ ê¸°ë³¸ ì´í•´
- Dockerfile ì‘ì„± ê²½í—˜

---

## 1ë‹¨ê³„: ë¬¸ì œ ìƒí™© ì´í•´í•˜ê¸°

### ì»¨í…Œì´ë„ˆë¡œ ê°œë°œí•  ë•Œì˜ ë¶ˆí¸í•¨

ì»¨í…Œì´ë„ˆë¡œ ê°œë°œí•˜ëŠ” ì´ìœ ëŠ” ì—¬ëŸ¬ ê°€ì§€ì…ë‹ˆë‹¤:

- âœ… íŒ€ì›ë¼ë¦¬ ê°œë°œí™˜ê²½ì„ ì•„ì˜ˆ ë˜‘ê°™ì´ ë§ì¶œ ìˆ˜ ìˆìŒ
- âœ… ë°°í¬ ì „ì— í”„ë¡œë•ì…˜ê³¼ ìœ ì‚¬í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… ë¡œì»¬ í™˜ê²½ì„ ì˜¤ì—¼ì‹œí‚¤ì§€ ì•ŠìŒ

í•˜ì§€ë§Œ **ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ê³¼ì •ì´ ë„ˆë¬´ ë³µì¡**í•©ë‹ˆë‹¤.

### ê¸°ì¡´ ì›Œí¬í”Œë¡œìš°ì˜ ë¬¸ì œì 

ì½”ë“œë¥¼ ìˆ˜ì •í–ˆì„ ë•Œ:

```
1. docker compose down     â† ì»¨í…Œì´ë„ˆ ì¤‘ì§€
2. docker build            â† ì´ë¯¸ì§€ ë‹¤ì‹œ ë¹Œë“œ
3. docker compose up       â† ì»¨í…Œì´ë„ˆ ë‹¤ì‹œ ì‹œì‘

```

**"ì•ˆë…•" â†’ "ì•ˆë…•123"** ì´ëŸ° ì‘ì€ ë³€ê²½ë„ ë§¤ë²ˆ ì´ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼ í•©ë‹ˆë‹¤!

---

## 2ë‹¨ê³„: ìë™ ë¹Œë“œ ì„¤ì •

### docker-compose.ymlì— build ì˜µì…˜ ì¶”ê°€

ê°€ì¥ ê°„ë‹¨í•œ ê°œì„  ë°©ë²•ì€ ìë™ ë¹Œë“œ ì„¤ì •ì…ë‹ˆë‹¤.

```yaml
services:
  webserver:
    image: nodeserver:1
    build: . # Dockerfile ê²½ë¡œ ì§€ì •
    ports:
      - 8080:8080
```

**`build: .`** ì˜µì…˜ì„ ì¶”ê°€í•˜ë©´:

- í•´ë‹¹ ê²½ë¡œì˜ Dockerfileì„ ìë™ìœ¼ë¡œ ì°¾ìŒ
- `docker compose up` ì‹œ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ ë¹Œë“œ

### -build í”Œë˜ê·¸ ì‚¬ìš©í•˜ê¸°

```bash
# ê¸°ì¡´ ëª…ë ¹ì–´
docker compose up

# ìë™ ë¹Œë“œ í¬í•¨
docker compose up --build

```

ì´ì œ ì›Œí¬í”Œë¡œìš°ê°€ ë‹¤ìŒì²˜ëŸ¼ ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤:

```
1. docker compose down
2. docker compose up --build   â† ë¹Œë“œ + ì‹¤í–‰ì„ í•œ ë²ˆì—!

```

**ëª…ë ¹ì–´ í•˜ë‚˜ê°€ ì¤„ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤!** ğŸ‰

---

## 3ë‹¨ê³„: Graceful Shutdown êµ¬í˜„

### ì™œ ì»¨í…Œì´ë„ˆ ì¢…ë£Œê°€ ëŠë¦´ê¹Œ?

ì»¨í…Œì´ë„ˆë¥¼ ë„ëŠ”ë° **10ì´ˆ ì´ìƒ** ê±¸ë¦°ë‹¤ë©´?
â†’ **ì„œë²„ë¥¼ ì œëŒ€ë¡œ ì¢…ë£Œí•˜ëŠ” ì½”ë“œê°€ ì—†ê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤.

### Dockerì˜ ì¢…ë£Œ í”„ë¡œì„¸ìŠ¤

```
[Docker Engine]
    â†“
"ì¢‹ì€ ë§ í•  ë•Œ ì•Œì•„ì„œ êº¼ë¼" (SIGTERM ì‹ í˜¸ ì „ì†¡)
    â†“
[Container/Program]
    â†“
ì¢…ë£Œ ì½”ë“œ ì—†ìŒ? â†’ 10ì´ˆ ëŒ€ê¸° â†’ ê°•ì œ ì¢…ë£Œ (SIGKILL)

```

### Signal ì²˜ë¦¬ ì½”ë“œ ì‘ì„±

**Node.js + Express ì˜ˆì œ:**

```jsx
// server.js
const express = require("express");
const app = express();

// ... ë¼ìš°íŠ¸ ì„¤ì • ë“± ...

const server = app.listen(8080, () => {
  console.log("Server running on port 8080");
});

// SIGTERM ì‹ í˜¸ ì²˜ë¦¬ (Dockerê°€ ë³´ë‚´ëŠ” ì¢…ë£Œ ì‹ í˜¸)
process.on("SIGTERM", () => {
  console.log("SIGTERM received. Shutting down gracefully...");
  server.close(() => {
    console.log("HTTP server closed");
    // í•„ìš”í•œ ê²½ìš° DB ì—°ê²° í•´ì œ ë“± ì¶”ê°€
    process.exit(0);
  });
});

// SIGINT ì‹ í˜¸ ì²˜ë¦¬ (Ctrl+C)
process.on("SIGINT", () => {
  console.log("SIGINT received. Shutting down gracefully...");
  server.close(() => {
    console.log("HTTP server closed");
    process.exit(0);
  });
});
```

### ê° ë¶€ë¶„ ì„¤ëª…

- **`SIGTERM`**: Dockerê°€ ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€í•  ë•Œ ë³´ë‚´ëŠ” ì‹ í˜¸
- **`SIGINT`**: í„°ë¯¸ë„ì—ì„œ `Ctrl+C`ë¥¼ ëˆŒë €ì„ ë•Œ ë³´ë‚´ëŠ” ì‹ í˜¸
- **`server.close()`**: í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ ìš”ì²­ì„ ì™„ë£Œí•œ í›„ ì„œë²„ ì¢…ë£Œ
- **`process.exit(0)`**: í”„ë¡œì„¸ìŠ¤ë¥¼ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œ

### DB ì‚¬ìš© ì‹œ ì¶”ê°€ ì²˜ë¦¬

```jsx
process.on("SIGTERM", () => {
  server.close(async () => {
    console.log("HTTP server closed");

    // DB ì—°ê²° í•´ì œ
    await db.disconnect();
    console.log("Database connection closed");

    process.exit(0);
  });
});
```

---

## 4ë‹¨ê³„: Watch ê¸°ëŠ¥ ì„¤ì • (í•µì‹¬!)

### Watch ê¸°ëŠ¥ì´ë€?

Docker Composeì˜ **Watch ê¸°ëŠ¥**ì€:

- íŒŒì¼ ë³€ê²½ì„ ê°ì§€í•˜ë©´ **ìë™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆì— ë°˜ì˜**
- ë¹Œë“œ ì—†ì´ ì¦‰ì‹œ ë³€ê²½ì‚¬í•­ í™•ì¸ ê°€ëŠ¥
- ê°œë°œ ì†ë„ë¥¼ íšê¸°ì ìœ¼ë¡œ í–¥ìƒ

### ê¸°ë³¸ Sync ì„¤ì •

```yaml
services:
  webserver:
    build: .
    ports:
      - 8080:8080

    develop:
      watch:
        - action: sync
          path: .
          target: /app
          ignore:
            - node_modules/
```

**ê° ì˜µì…˜ ì„¤ëª…:**

| ì˜µì…˜           | ì„¤ëª…                         |
| -------------- | ---------------------------- |
| `action: sync` | íŒŒì¼ ë³€ê²½ ì‹œ ì»¨í…Œì´ë„ˆë¡œ ë³µì‚¬ |
| `path: .`      | ê°ì‹œí•  ë¡œì»¬ ê²½ë¡œ (í˜„ì¬ í´ë”) |
| `target: /app` | ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ ëŒ€ìƒ ê²½ë¡œ    |
| `ignore`       | ì œì™¸í•  íŒŒì¼/í´ë” ëª©ë¡        |

### Watch ì‹¤í–‰í•˜ê¸°

```bash
docker compose up --watch

```

ì´ì œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  ì €ì¥í•˜ë©´:

1. Watchê°€ ë³€ê²½ ê°ì§€
2. ìë™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆì— ë³µì‚¬
3. **ë¹Œë“œ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜!**

### ì£¼ì˜ì‚¬í•­

íŒŒì¼ì€ ë³µì‚¬ë˜ì§€ë§Œ, **ì„œë²„ëŠ” ìë™ìœ¼ë¡œ ì¬ì‹œì‘ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!**

ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸í•´ë„ ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ì´ìœ :

- ë¡œì»¬ ê°œë°œë„ ì½”ë“œ ìˆ˜ì • í›„ ì„œë²„ ì¬ì‹œì‘ í•„ìš”
- ì»¨í…Œì´ë„ˆë„ ë§ˆì°¬ê°€ì§€!

### Sync + Restart ì„¤ì •

```yaml
services:
  webserver:
    build: .
    ports:
      - 8080:8080

    develop:
      watch:
        - action: sync+restart
          path: .
          target: /app
          ignore:
            - node_modules/
```

- **`sync+restart`**ë¥¼ ì‚¬ìš©í•˜ë©´:
- íŒŒì¼ ë³µì‚¬ í›„ **ì»¨í…Œì´ë„ˆ ìë™ ì¬ì‹œì‘**
- ë³€ê²½ì‚¬í•­ì´ ì¦‰ì‹œ ì„œë²„ì— ë°˜ì˜ë¨

---

## 5ë‹¨ê³„: ì¶”ê°€ ìµœì í™”

### Command ë®ì–´ì“°ê¸°

Dockerfileì˜ `CMD`ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  docker-composeì—ì„œ ë®ì–´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì‚¬ìš© ì˜ˆì‹œ: nodemonìœ¼ë¡œ ìë™ ì¬ì‹œì‘**

```yaml
services:
  webserver:
    build: .
    ports:
      - 8080:8080
    command: ["nodemon", "server.js"] # Dockerfileì˜ CMDë¥¼ ë®ì–´ì”€

    develop:
      watch:
        - action: sync
          path: .
          target: /app
          ignore:
            - node_modules/
```

**nodemonì´ë€?**

- Node.js ê°œë°œ ë„êµ¬
- íŒŒì¼ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì„œë²„ ì¬ì‹œì‘
- `sync+restart` ëŒ€ì‹  `sync`ë§Œ ì‚¬ìš©í•´ë„ ë¨

### Rebuild ì•¡ì…˜ ì‚¬ìš©

íŠ¹ì • íŒŒì¼ì´ ë³€ê²½ë˜ë©´ **ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œ**í•˜ë„ë¡ ì„¤ì •:

```yaml
services:
  webserver:
    build: .
    ports:
      - 8080:8080

    develop:
      watch:
        # ì¼ë°˜ íŒŒì¼ì€ ë™ê¸°í™”
        - action: sync+restart
          path: ./src
          target: /app/src

        # package.json ë³€ê²½ ì‹œ ì¬ë¹Œë“œ
        - action: rebuild
          path: package.json
```

**ì–¸ì œ rebuildë¥¼ ì‚¬ìš©í• ê¹Œ?**

- **íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ í•„ìš”í•œ ê²½ìš°**: `package.json`, `requirements.txt` ë“±
- **ì»´íŒŒì¼ì´ í•„ìš”í•œ ì–¸ì–´**: TypeScript, Go ë“±
- **í™˜ê²½ ì„¤ì • íŒŒì¼ ë³€ê²½**: ì´ë¯¸ì§€ì— í¬í•¨ë˜ëŠ” ì„¤ì • íŒŒì¼

---

## ğŸ“ í•µì‹¬ ìš”ì•½

### ê°œë°œ ì›Œí¬í”Œë¡œìš° ì§„í™”

**1ë‹¨ê³„: ê¸°ë³¸ (ë¹„íš¨ìœ¨ì )**

```bash
docker compose down
docker build -t myapp .
docker compose up

```

**2ë‹¨ê³„: ìë™ ë¹Œë“œ**

```bash
docker compose down
docker compose up --build

```

**3ë‹¨ê³„: Watch ê¸°ëŠ¥ (ìµœì !)**

```bash
docker compose up --watch
# ì´í›„ ì½”ë“œë§Œ ìˆ˜ì •í•˜ë©´ ìë™ ë°˜ì˜!

```

### ê¸°ëŠ¥ë³„ ì •ë¦¬

| ê¸°ëŠ¥                  | ìš©ë„           | ì„¤ì • ìœ„ì¹˜              |
| --------------------- | -------------- | ---------------------- |
| **ìë™ ë¹Œë“œ**         | ë¹Œë“œë¥¼ ìë™í™”  | `build: .`             |
| **Graceful Shutdown** | ë¹ ë¥¸ ì¢…ë£Œ      | ì½”ë“œ ë‚´ Signal ì²˜ë¦¬    |
| **Watch - Sync**      | íŒŒì¼ ìë™ ë³µì‚¬ | `action: sync`         |
| **Watch - Restart**   | ë³µì‚¬ + ì¬ì‹œì‘  | `action: sync+restart` |
| **Watch - Rebuild**   | ì´ë¯¸ì§€ ì¬ë¹Œë“œ  | `action: rebuild`      |
| **Command ë®ì–´ì“°ê¸°**  | ê°œë°œìš© ëª…ë ¹ì–´  | `command: [...]`       |

---

## ğŸ’» ì‹¤ì „ ì˜ˆì œ

### Node.js + Express í”„ë¡œì íŠ¸

**í”„ë¡œì íŠ¸ êµ¬ì¡°:**

```
my-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ routes/
â”œâ”€â”€ package.json
â”œâ”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml

```

**Dockerfile:**

```docker
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 8080
CMD ["node", "src/server.js"]

```

**docker-compose.yml:**

```yaml
services:
  webserver:
    build: .
    ports:
      - 8080:8080
    command: ["nodemon", "src/server.js"]

    develop:
      watch:
        # ì†ŒìŠ¤ ì½”ë“œ ë³€ê²½ ì‹œ ë™ê¸°í™” (nodemonì´ ì¬ì‹œì‘)
        - action: sync
          path: ./src
          target: /app/src

        # ì˜ì¡´ì„± ë³€ê²½ ì‹œ ì¬ë¹Œë“œ
        - action: rebuild
          path: package.json
```

**server.js (Graceful Shutdown í¬í•¨):**

```jsx
const express = require("express");
const app = express();

app.get("/", (req, res) => {
  res.send("Hello Docker!");
});

const server = app.listen(8080, () => {
  console.log("Server is running on port 8080");
});

// Graceful shutdown
process.on("SIGTERM", () => {
  console.log("SIGTERM received, closing server...");
  server.close(() => {
    console.log("Server closed");
    process.exit(0);
  });
});

process.on("SIGINT", () => {
  console.log("SIGINT received, closing server...");
  server.close(() => {
    console.log("Server closed");
    process.exit(0);
  });
});
```

**ì‹¤í–‰:**

```bash
# ê°œë°œ ì‹œì‘
docker compose up --watch

# ì´ì œ src/ ì•ˆì˜ íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ ìë™ ë°˜ì˜!
# package.json ìˆ˜ì • ì‹œ ìë™ ì¬ë¹Œë“œ!

```

---

## ğŸ”§ ë¬¸ì œ í•´ê²° (Troubleshooting)

### ë¬¸ì œ 1: Watchê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ì¦ìƒ:** íŒŒì¼ì„ ìˆ˜ì •í•´ë„ ì»¨í…Œì´ë„ˆì— ë°˜ì˜ë˜ì§€ ì•ŠìŒ

**í•´ê²°ë°©ë²•:**

```bash
# --watch í”Œë˜ê·¸ í™•ì¸
docker compose up --watch

# build ì˜µì…˜ì´ ìˆëŠ”ì§€ í™•ì¸
# docker-compose.ymlì— build: . í•„ìš”

```

### ë¬¸ì œ 2: ë³€ê²½ì‚¬í•­ì´ ë¸Œë¼ìš°ì €ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ

**ì›ì¸:** íŒŒì¼ì€ ë³µì‚¬ë˜ì—ˆì§€ë§Œ ì„œë²„ê°€ ì¬ì‹œì‘ë˜ì§€ ì•ŠìŒ

**í•´ê²°ë°©ë²•:**

1. `sync+restart` ì‚¬ìš©
2. ë˜ëŠ” nodemon ê°™ì€ ë„êµ¬ ì‚¬ìš©

### ë¬¸ì œ 3: ì¢…ë£Œê°€ ë„ˆë¬´ ëŠë¦¼ (10ì´ˆ ì´ìƒ)

**ì›ì¸:** Graceful shutdown ì½”ë“œ ì—†ìŒ

**í•´ê²°ë°©ë²•:**

- Signal ì²˜ë¦¬ ì½”ë“œ ì¶”ê°€
- DB ì—°ê²° ë“± ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ì½”ë“œ ì‘ì„±

### ë¬¸ì œ 4: node_modulesê°€ ê³„ì† ë³µì‚¬ë¨

**ì›ì¸:** ignore ì„¤ì • ëˆ„ë½

**í•´ê²°ë°©ë²•:**

```yaml
watch:
  - action: sync
    path: .
    target: /app
    ignore:
      - node_modules/
      - .git/
      - dist/
```

ë˜ëŠ” `.dockerignore` íŒŒì¼ ì‚¬ìš©:

```
node_modules/
.git/
*.log

```

### ë¬¸ì œ 5: ì˜ì¡´ì„± ë³€ê²½ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ

**ì›ì¸:** rebuild ì•¡ì…˜ ì—†ìŒ

**í•´ê²°ë°©ë²•:**

```yaml
watch:
  - action: rebuild
    path: package.json
```

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ì´ì œ ë‹¤ìŒ ì£¼ì œë¥¼ í•™ìŠµí•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤:

1. **Docker Network**: ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ 
2. **Volume ì‹¬í™”**: ë°ì´í„° ì˜ì†ì„±ê³¼ ì„±ëŠ¥ ìµœì í™”
3. **Multi-stage Build**: ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”
4. **Production ë°°í¬**: Watch ì—†ì´ ìš´ì˜ í™˜ê²½ êµ¬ì„±

---

## ğŸ’¡ ì—°ìŠµ ë¬¸ì œ

### ë¬¸ì œ 1: ê¸°ë³¸ Watch ì„¤ì •

Python Flask ì•±ì— Watch ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ì„¸ìš”.

```yaml
services:
  flask-app:
    build: .
    ports:
      - 5000:5000
    # ì—¬ê¸°ì— develop/watch ì„¤ì • ì¶”ê°€
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

```yaml
services:
  flask-app:
    build: .
    ports:
      - 5000:5000
    command: ["flask", "run", "--host=0.0.0.0", "--reload"]
    develop:
      watch:
        - action: sync
          path: .
          target: /app
          ignore:
            - __pycache__/
            - *.pyc
        - action: rebuild
          path: requirements.txt

```

</details>

### ë¬¸ì œ 2: Graceful Shutdown

ë‹¤ìŒ Express ì„œë²„ì— Graceful Shutdownì„ ì¶”ê°€í•˜ì„¸ìš”.

```jsx
const express = require("express");
const app = express();

app.get("/", (req, res) => res.send("OK"));

app.listen(3000);
// SIGTERM, SIGINT ì²˜ë¦¬ ì½”ë“œ ì¶”ê°€
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

```jsx
const express = require("express");
const app = express();

app.get("/", (req, res) => res.send("OK"));

const server = app.listen(3000);

process.on("SIGTERM", () => {
  server.close(() => {
    console.log("Server closed");
    process.exit(0);
  });
});

process.on("SIGINT", () => {
  server.close(() => {
    console.log("Server closed");
    process.exit(0);
  });
});
```

</details>

### ë¬¸ì œ 3: ë³µí•© Watch ì„¤ì •

ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” watch ì„¤ì •ì„ ì‘ì„±í•˜ì„¸ìš”:

- `src/` í´ë”ì˜ JavaScript íŒŒì¼ ë³€ê²½ ì‹œ: syncë§Œ ì‹¤í–‰ (nodemon ì‚¬ìš©)
- `package.json` ë³€ê²½ ì‹œ: ì´ë¯¸ì§€ ì¬ë¹Œë“œ
- `public/` í´ë”ì˜ ì •ì  íŒŒì¼ ë³€ê²½ ì‹œ: sync + restart

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

```yaml
develop:
  watch:
    - action: sync
      path: ./src
      target: /app/src

    - action: rebuild
      path: package.json

    - action: sync+restart
      path: ./public
      target: /app/public
```

</details>

---

## ğŸ“– ì°¸ê³  ìë£Œ

- [Docker Compose Watch ê³µì‹ ë¬¸ì„œ](https://docs.docker.com/compose/file-watch/)
- [Signal ì²˜ë¦¬ (Node.js)](https://nodejs.org/api/process.html#signal-events)
- [Graceful Shutdown íŒ¨í„´](https://expressjs.com/en/advanced/healthcheck-graceful-shutdown.html)

---
