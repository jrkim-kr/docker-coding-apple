# 10. Volume ì‚¬ìš©ë²•ê³¼ PostgreSQL DB ë„ìš°ê¸°

# í•µì‹¬ ì •ë¦¬

## ğŸ¯ í•™ìŠµ ëª©í‘œ

ì´ íŠœí† ë¦¬ì–¼ì„ ë§ˆì¹˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- Docker Volumeì˜ ê°œë…ê³¼ í•„ìš”ì„± ì´í•´
- PostgreSQL DBë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰
- Volumeì„ ìƒì„±í•˜ê³  ì»¨í…Œì´ë„ˆì— ì¥ì°©
- ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ë³´ê´€í•˜ëŠ” ë°©ë²• ìŠµë“
- Bind Mountì™€ Volumeì˜ ì°¨ì´ì  íŒŒì•…

---

## ğŸ“š ì‚¬ì „ ì§€ì‹

- Docker ê¸°ë³¸ ëª…ë ¹ì–´ (run, exec)
- ì»¨í…Œì´ë„ˆì˜ ê°œë…
- ê°„ë‹¨í•œ í„°ë¯¸ë„ ëª…ë ¹ì–´
- (ì„ íƒ) SQL ê¸°ë³¸ ë¬¸ë²•

---

## 1ë‹¨ê³„: Volumeì´ë€?

### ì™œ Volumeì´ í•„ìš”í•œê°€ìš”?

**ë¬¸ì œ ìƒí™©:**

```
[ì»¨í…Œì´ë„ˆ ì‹¤í–‰] â†’ [ë°ì´í„° ì €ì¥] â†’ [ì»¨í…Œì´ë„ˆ ì¢…ë£Œ] â†’ ğŸ’¥ ë°ì´í„° ì‚¬ë¼ì§!

```

ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ì¼íšŒìš©**ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•˜ê±°ë‚˜ ì¬ì‹œì‘í•˜ë©´ ì•ˆì— ìˆë˜ ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

**í•´ê²°ì±…: Volume**

```
[ì»¨í…Œì´ë„ˆ] â‡„ [Volume (ì˜êµ¬ ì €ì¥ì†Œ)]
     â†“
ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•´ë„ Volumeì— ë°ì´í„° ë³´ê´€ë¨

```

### Volumeì˜ ì‘ë™ ì›ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì»¨í…Œì´ë„ˆ      â”‚
â”‚  /var/lib/...   â”‚ â† ë°ì´í„° ìƒì„±
â”‚        â†“        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ìë™ ë³µì‚¬
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Volume        â”‚
â”‚  (ì˜êµ¬ ì €ì¥)    â”‚ â† ë°ì´í„° ë³´ì¡´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

- **ì»¨í…Œì´ë„ˆì—ì„œ ë°ì´í„° ìƒì„±** â†’ ìë™ìœ¼ë¡œ Volumeì— ë³µì‚¬
- **ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘** â†’ Volumeì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜´
- **ë°ì´í„° ì•ˆì „í•˜ê²Œ ë³´ê´€** âœ…

---

## 2ë‹¨ê³„: PostgreSQL ì´ë¯¸ì§€ ë‹¤ìš´ë°›ê¸°

### Docker Desktopì—ì„œ ë‹¤ìš´ë°›ê¸°

1. Docker Desktop ì‹¤í–‰
2. ìƒë‹¨ ê²€ìƒ‰ì°½ì— `postgres` ì…ë ¥
3. `postgres:17-alpine` ì„ íƒ (ìš©ëŸ‰ì´ ì‘ì€ ë²„ì „)
4. Pull ë²„íŠ¼ í´ë¦­

### í„°ë¯¸ë„ì—ì„œ ë‹¤ìš´ë°›ê¸°

```bash
docker pull postgres:17-alpine

```

**Alpineì´ë€?**

- ê²½ëŸ‰í™”ëœ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ
- ìš©ëŸ‰ì´ ì‘ì•„ì„œ ë¹ ë¥´ê²Œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
- ê¸°ë³¸ ê¸°ëŠ¥ì€ ëª¨ë‘ í¬í•¨

---

## 3ë‹¨ê³„: DB ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•˜ê¸°

### í™˜ê²½ë³€ìˆ˜ë€?

í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ í•„ìš”í•œ ì„¤ì •ê°’ì…ë‹ˆë‹¤. DBëŠ” ë³´ì•ˆì„ ìœ„í•´ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¥¼ **í™˜ê²½ë³€ìˆ˜**ë¡œ ë°›ìŠµë‹ˆë‹¤.

```
í™˜ê²½ë³€ìˆ˜ = í”„ë¡œê·¸ë¨ì˜ ì´ˆê¸° ì„¤ì •ê°’

```

### Docker Desktopì—ì„œ ì‹¤í–‰

1. Images íƒ­ì—ì„œ `postgres:17-alpine` ì°¾ê¸°
2. Run ë²„íŠ¼ í´ë¦­
3. Optional settings í¼ì¹˜ê¸°
4. Environment variables ì„¹ì…˜ì— ì¶”ê°€:
   - `POSTGRES_USER`: `admin`
   - `POSTGRES_PASSWORD`: `qwer1234`
5. Container name: `db-container`
6. Run ë²„íŠ¼ í´ë¦­

### ì‹¤í–‰ ëª…ë ¹ì–´ ì´í•´í•˜ê¸°

í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´:

```bash
docker run -d --name db-container \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  postgres:17-alpine

```

**ê° ì˜µì…˜ ì„¤ëª…:**

- `d`: ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ (detached mode)
- `-name db-container`: ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •
- `e POSTGRES_USER=admin`: í™˜ê²½ë³€ìˆ˜ ì„¤ì • (DB ìœ ì €ëª…)
- `e POSTGRES_PASSWORD=qwer1234`: í™˜ê²½ë³€ìˆ˜ ì„¤ì • (DB ë¹„ë°€ë²ˆí˜¸)

---

## 4ë‹¨ê³„: DBì— ì ‘ì†í•˜ê¸°

### ì»¨í…Œì´ë„ˆ í„°ë¯¸ë„ ì ‘ì†

**ë°©ë²• 1: Docker Desktop ì‚¬ìš©**

1. Containers íƒ­ì—ì„œ `db-container` ì°¾ê¸°
2. ìš°ì¸¡ì˜ `Exec` íƒ­ í´ë¦­
3. í„°ë¯¸ë„ í™”ë©´ ë‚˜íƒ€ë‚¨

**ë°©ë²• 2: í„°ë¯¸ë„ ëª…ë ¹ì–´**

```bash
docker exec -it db-container /bin/sh

```

- `exec`: ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆì—ì„œ ëª…ë ¹ ì‹¤í–‰
- `it`: ì¸í„°ë™í‹°ë¸Œ í„°ë¯¸ë„ ëª¨ë“œ
- `/bin/sh`: ì‰˜(í„°ë¯¸ë„) ì‹¤í–‰

### psql ì‚¬ìš©ë²•

ì»¨í…Œì´ë„ˆ í„°ë¯¸ë„ì— ë“¤ì–´ì™”ë‹¤ë©´:

```bash
psql -U admin -W

```

- `psql`: PostgreSQL í„°ë¯¸ë„ í´ë¼ì´ì–¸íŠ¸
- `U admin`: ìœ ì €ëª… ì§€ì •
- `W`: ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í”„ë¡¬í”„íŠ¸ í‘œì‹œ

ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ì ‘ì† ì„±ê³µ!

```
psql (17.0)
Type "help" for help.

admin=#

```

### ê¸°ë³¸ psql ëª…ë ¹ì–´

| ëª…ë ¹ì–´ | ì„¤ëª…                   | ì˜ˆì‹œ          |
| ------ | ---------------------- | ------------- |
| `\l`   | ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ ë³´ê¸° | `\l`          |
| `\c`   | ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†      | `\c postgres` |
| `\d`   | í…Œì´ë¸” ëª©ë¡ ë³´ê¸°       | `\d`          |
| `\dt`  | í…Œì´ë¸”ë§Œ ë³´ê¸°          | `\dt`         |
| `\q`   | psql ì¢…ë£Œ              | `\q`          |

**ë°ì´í„°ë² ì´ìŠ¤ vs í…Œì´ë¸”:**

- **ë°ì´í„°ë² ì´ìŠ¤**: í…Œì´ë¸”ì„ ë‹´ëŠ” í´ë”
- **í…Œì´ë¸”**: ì‹¤ì œ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ì—‘ì…€ ì‹œíŠ¸

---

## 5ë‹¨ê³„: ë°ì´í„° ìƒì„± ë° ì¡°íšŒ

### ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†

```sql
\c postgres

```

ê¸°ë³¸ìœ¼ë¡œ ìƒì„±ë˜ëŠ” `postgres` ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•©ë‹ˆë‹¤.

### í…Œì´ë¸” ë§Œë“¤ê¸°

```sql
CREATE TABLE product (
    title VARCHAR(100)
);

```

- `CREATE TABLE`: í…Œì´ë¸” ìƒì„± ëª…ë ¹
- `product`: í…Œì´ë¸” ì´ë¦„
- `title VARCHAR(100)`: ë¬¸ìì—´ ì»¬ëŸ¼ (ìµœëŒ€ 100ì)

**ì‹¤í–‰ ê²°ê³¼:**

```
CREATE TABLE

```

### ë°ì´í„° ì¶”ê°€í•˜ê¸°

```sql
INSERT INTO product VALUES ('shirt');
INSERT INTO product VALUES ('pants');
INSERT INTO product VALUES ('shoes');

```

- `INSERT INTO`: ë°ì´í„° ì‚½ì… ëª…ë ¹
- `VALUES`: ì‚½ì…í•  ê°’

**ì‹¤í–‰ ê²°ê³¼:**

```
INSERT 0 1

```

### ë°ì´í„° ì¡°íšŒí•˜ê¸°

```sql
SELECT * FROM product;

```

**ì‹¤í–‰ ê²°ê³¼:**

```
 title
-------
 shirt
 pants
 shoes
(3 rows)

```

---

## 6ë‹¨ê³„: Volume ìƒì„± ë° ì¥ì°©

### ë¬¸ì œ ìƒí™© ì¬í˜„

ì§€ê¸ˆê¹Œì§€ ë§Œë“  ë°ì´í„°ëŠ” ì»¨í…Œì´ë„ˆ ì•ˆì—ë§Œ ìˆìŠµë‹ˆë‹¤:

```bash
# ì»¨í…Œì´ë„ˆ ì •ì§€ ë° ì‚­ì œ
docker stop db-container
docker rm db-container

# ë‹¤ì‹œ ì‹¤í–‰
docker run -d --name db-container \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  postgres:17-alpine

```

ë‹¤ì‹œ ì ‘ì†í•´ì„œ í™•ì¸í•˜ë©´:

```sql
\c postgres
\d
# í…Œì´ë¸”ì´ ì—†ìŒ!

```

ğŸ’¥ **ë°ì´í„°ê°€ ëª¨ë‘ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤!**

### Volume ë§Œë“¤ê¸°

**Docker Desktopì—ì„œ:**

1. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ `Volumes` í´ë¦­
2. `Create` ë²„íŠ¼ í´ë¦­
3. Volume name: `postgres-data`

**í„°ë¯¸ë„ì—ì„œ:**

```bash
docker volume create postgres-data

```

### Volume ëª…ë ¹ì–´ ëª¨ìŒ

```bash
# Volume ìƒì„±
docker volume create ë³¼ë¥¨ì´ë¦„

# Volume ëª©ë¡ ë³´ê¸°
docker volume ls

# Volume ìƒì„¸ ì •ë³´
docker volume inspect ë³¼ë¥¨ì´ë¦„

# Volume ì‚­ì œ
docker volume rm ë³¼ë¥¨ì´ë¦„

```

### Volumeê³¼ í•¨ê»˜ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```bash
docker run -d --name db-container \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  -v postgres-data:/var/lib/postgresql/data \
  postgres:17-alpine

```

**ìƒˆë¡œìš´ ì˜µì…˜:**

- `v postgres-data:/var/lib/postgresql/data`
  - `postgres-data`: Volume ì´ë¦„
  - `/var/lib/postgresql/data`: PostgreSQLì´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ê²½ë¡œ

**ë‹¤ë¥¸ DBì˜ ë°ì´í„° ê²½ë¡œ:**

- MySQL: `/var/lib/mysql`
- MongoDB: `/data/db`
- Redis: `/data`

---

## 7ë‹¨ê³„: ë°ì´í„° ì˜ì†ì„± í™•ì¸

### ë°ì´í„° ë‹¤ì‹œ ìƒì„±

```bash
# ì»¨í…Œì´ë„ˆ ì ‘ì†
docker exec -it db-container /bin/sh

# psql ì ‘ì†
psql -U admin -W

```

```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†
\c postgres

-- í…Œì´ë¸” ìƒì„±
CREATE TABLE product (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    price INT
);

-- ë°ì´í„° ì¶”ê°€
INSERT INTO product (title, price) VALUES ('shirt', 25000);
INSERT INTO product (title, price) VALUES ('pants', 35000);

-- í™•ì¸
SELECT * FROM product;

```

**ì‹¤í–‰ ê²°ê³¼:**

```
 id | title | price
----+-------+-------
  1 | shirt | 25000
  2 | pants | 35000

```

### ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì¬ì‹¤í–‰

```bash
# ì»¨í…Œì´ë„ˆ ì •ì§€ ë° ì‚­ì œ
docker stop db-container
docker rm db-container

# ê°™ì€ Volumeìœ¼ë¡œ ë‹¤ì‹œ ì‹¤í–‰
docker run -d --name db-container \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  -v postgres-data:/var/lib/postgresql/data \
  postgres:17-alpine

```

### ë°ì´í„° í™•ì¸

```bash
docker exec -it db-container /bin/sh
psql -U admin -W

```

```sql
\c postgres
SELECT * FROM product;

```

**ê²°ê³¼:**

```
 id | title | price
----+-------+-------
  1 | shirt | 25000
  2 | pants | 35000

```

âœ… **ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤!**

---

## 8ë‹¨ê³„: Bind Mount ì´í•´í•˜ê¸°

### Volume vs Bind Mount

| íŠ¹ì§•      | Volume               | Bind Mount       |
| --------- | -------------------- | ---------------- |
| ê´€ë¦¬ ì£¼ì²´ | Docker               | ì‚¬ìš©ì           |
| ì €ì¥ ìœ„ì¹˜ | Docker ê´€ë¦¬ í´ë”     | ë‚´ê°€ ì§€ì •í•œ í´ë” |
| ê²½ë¡œ      | ìë™ ìƒì„±            | ì§ì ‘ ì§€ì •        |
| ì‚¬ìš© ìš©ë„ | ì¼ë°˜ì ì¸ ë°ì´í„° ë³´ê´€ | ê°œë°œ/ë””ë²„ê¹…      |

### Bind Mount ì‚¬ìš©ë²•

```bash
docker run -d --name db-container \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  -v /Users/myname/db-data:/var/lib/postgresql/data \
  postgres:17-alpine

```

- `/Users/myname/db-data`: ë‚´ ì»´í“¨í„°ì˜ ì‹¤ì œ í´ë” ê²½ë¡œ
- ì´ í´ë”ì— DB ë°ì´í„°ê°€ ì§ì ‘ ì €ì¥ë¨

### ì–¸ì œ Bind Mountë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?

**Volume ì‚¬ìš© (ê¶Œì¥):**

- ìš´ì˜ í™˜ê²½ì˜ DB
- ìë™ ë°±ì—… ì‹œìŠ¤í…œ êµ¬ì¶•
- Dockerê°€ ì•Œì•„ì„œ ê´€ë¦¬

**Bind Mount ì‚¬ìš©:**

- ê°œë°œ ì¤‘ ì½”ë“œ ë³€ê²½ì‚¬í•­ ì¦‰ì‹œ ë°˜ì˜
- ë¡œê·¸ íŒŒì¼ ì§ì ‘ í™•ì¸
- íŠ¹ì • ìœ„ì¹˜ì— ë°ì´í„° ë³´ê´€ í•„ìš”

---

## ğŸ“ í•µì‹¬ ìš”ì•½

### Volumeì˜ í•„ìš”ì„±

```
ì»¨í…Œì´ë„ˆ = íœ˜ë°œì„± (ë°ì´í„° ì‚¬ë¼ì§)
Volume = ì˜ì†ì„± (ë°ì´í„° ë³´ì¡´)

```

### ì‹¤ìŠµ ìˆœì„œ ë³µìŠµ

1. **DB ì´ë¯¸ì§€ ë‹¤ìš´** â†’ `postgres:17-alpine`
2. **í™˜ê²½ë³€ìˆ˜ ì„¤ì •** â†’ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸
3. **ì»¨í…Œì´ë„ˆ ì‹¤í–‰** â†’ DB ì„œë²„ ì‹œì‘
4. **psql ì ‘ì†** â†’ DB ì¡°ì‘
5. **Volume ìƒì„±** â†’ ë°ì´í„° ì €ì¥ì†Œ
6. **Volume ì¥ì°©** â†’ `v` ì˜µì…˜ ì‚¬ìš©
7. **ì˜ì†ì„± í™•ì¸** â†’ ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì¬ì‹¤í–‰

### í•µì‹¬ ëª…ë ¹ì–´

```bash
# Volume ìƒì„±
docker volume create postgres-data

# Volumeê³¼ í•¨ê»˜ ì‹¤í–‰
docker run -v postgres-data:/var/lib/postgresql/data postgres:17-alpine

# ì»¨í…Œì´ë„ˆ í„°ë¯¸ë„ ì ‘ì†
docker exec -it ì»¨í…Œì´ë„ˆëª… /bin/sh

# DB ì ‘ì†
psql -U admin -W

```

---

## ğŸ’¡ ì‹¤ì „ íŒ

### 1. Volume ë°±ì—…í•˜ê¸°

Volume ë‚´ìš©ì„ ì••ì¶• íŒŒì¼ë¡œ ë°±ì—…:

```bash
docker run --rm -v postgres-data:/data -v $(pwd):/backup \
  alpine tar czf /backup/backup.tar.gz -C /data .

```

### 2. Volume ë³µì›í•˜ê¸°

ë°±ì—… íŒŒì¼ì—ì„œ Volume ë³µì›:

```bash
docker run --rm -v postgres-data:/data -v $(pwd):/backup \
  alpine tar xzf /backup/backup.tar.gz -C /data

```

### 3. ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ”?

**ì»¨í…Œì´ë„ˆ DBì˜ ì¥ë‹¨ì :**

**ì¥ì :**

- âœ… ë¹ ë¥¸ í™˜ê²½ êµ¬ì¶•
- âœ… í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½ êµ¬ì¶• ìš©ì´
- âœ… ë²„ì „ ê´€ë¦¬ ì‰¬ì›€

**ë‹¨ì :**

- âš ï¸ ì•ˆì •ì„± ë¬¸ì œ
- âš ï¸ ë°±ì—… ê´€ë¦¬ ë³µì¡
- âš ï¸ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ

**ê¶Œì¥ ì‚¬í•­:**

- **ê°œë°œ/í…ŒìŠ¤íŠ¸**: ì»¨í…Œì´ë„ˆ DB ì‚¬ìš©
- **ìš´ì˜ í™˜ê²½**: ê´€ë¦¬í˜• DB ì„œë¹„ìŠ¤ ì‚¬ìš© (AWS RDS, Google Cloud SQL ë“±)

### 4. Node.jsì—ì„œ PostgreSQL ì—°ê²°

```jsx
const { Pool } = require("pg");

const pool = new Pool({
  host: "localhost", // ë˜ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¦„
  database: "postgres",
  user: "admin",
  password: "qwer1234",
  port: 5432,
});

// ì¿¼ë¦¬ ì‹¤í–‰
app.get("/products", async (req, res) => {
  try {
    const result = await pool.query("SELECT * FROM product");
    res.json(result.rows);
  } catch (err) {
    console.error(err);
    res.status(500).send("Database error");
  }
});
```

---

## ğŸ’ª ì—°ìŠµ ë¬¸ì œ

### ê¸°ì´ˆ ë¬¸ì œ

1. **Volume ìƒì„±í•˜ê¸°**
   - `my-test-volume`ì´ë¼ëŠ” ì´ë¦„ì˜ Volumeì„ ìƒì„±í•˜ì„¸ìš”
2. **DB ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
   - PostgreSQLì„ Volumeê³¼ í•¨ê»˜ ì‹¤í–‰í•˜ì„¸ìš”
   - í¬íŠ¸ë¥¼ 5432:5432ë¡œ ë§¤í•‘í•˜ì„¸ìš”
3. **í…Œì´ë¸” ìƒì„± ë° ë°ì´í„° ì…ë ¥**
   - `users` í…Œì´ë¸”ì„ ë§Œë“œì„¸ìš” (id, name, email)
   - 3ëª…ì˜ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ì„¸ìš”

### ì‹¬í™” ë¬¸ì œ

1. **ì˜ì†ì„± í…ŒìŠ¤íŠ¸**
   - ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰
   - ë°ì´í„°ê°€ ìœ ì§€ë˜ëŠ”ì§€ í™•ì¸
2. **Bind Mount ì‹¤ìŠµ**
   - ë‚´ ì»´í“¨í„°ì˜ íŠ¹ì • í´ë”ë¥¼ Bind Mountë¡œ ì—°ê²°
   - í•´ë‹¹ í´ë”ì— DB íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸
3. **ì—¬ëŸ¬ í…Œì´ë¸” ë§Œë“¤ê¸°**
   - `orders` í…Œì´ë¸” ìƒì„± (order_id, user_id, product_id, quantity)
   - `users`ì™€ `orders`ë¥¼ JOINí•˜ëŠ” ì¿¼ë¦¬ ì‘ì„±

### ì •ë‹µ ì˜ˆì‹œ

**ë¬¸ì œ 1-3 ì •ë‹µ:**

```bash
# 1. Volume ìƒì„±
docker volume create my-test-volume

# 2. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d --name my-postgres \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=qwer1234 \
  -p 5432:5432 \
  -v my-test-volume:/var/lib/postgresql/data \
  postgres:17-alpine

# 3. ì ‘ì† ë° í…Œì´ë¸” ìƒì„±
docker exec -it my-postgres /bin/sh
psql -U admin -W

```

```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†
\c postgres

-- í…Œì´ë¸” ìƒì„±
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);

-- ë°ì´í„° ì…ë ¥
INSERT INTO users (name, email) VALUES
    ('ê¹€ì² ìˆ˜', 'kim@example.com'),
    ('ì´ì˜í¬', 'lee@example.com'),
    ('ë°•ë¯¼ìˆ˜', 'park@example.com');

-- í™•ì¸
SELECT * FROM users;

```

**ë¬¸ì œ 6 ì •ë‹µ:**

```sql
-- orders í…Œì´ë¸” ìƒì„±
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    user_id INT,
    product_id INT,
    quantity INT
);

-- ìƒ˜í”Œ ë°ì´í„°
INSERT INTO orders (user_id, product_id, quantity) VALUES
    (1, 101, 2),
    (2, 102, 1),
    (1, 103, 5);

-- JOIN ì¿¼ë¦¬
SELECT u.name, u.email, o.order_id, o.quantity
FROM users u
JOIN orders o ON u.id = o.user_id;

```

---

## ğŸ“Œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)

**Q: Volumeì„ ì‚­ì œí•˜ë©´ ë°ì´í„°ë„ ì‚¬ë¼ì§€ë‚˜ìš”?**

- A: ë„¤, Volumeì„ ì‚­ì œí•˜ë©´ ì•ˆì— ìˆë˜ ëª¨ë“  ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì£¼ì˜í•˜ì„¸ìš”!

**Q: í•˜ë‚˜ì˜ Volumeì„ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆê°€ ê³µìœ í•  ìˆ˜ ìˆë‚˜ìš”?**

- A: ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆê°€ ê°™ì€ Volumeì„ ì½ê³  ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q: Volumeì˜ ì‹¤ì œ ì €ì¥ ìœ„ì¹˜ëŠ” ì–´ë””ì¸ê°€ìš”?**

- A: Docker Desktopì˜ ê²½ìš° ê°€ìƒ ë¨¸ì‹  ë‚´ë¶€ì— ì €ì¥ë©ë‹ˆë‹¤. `docker volume inspect` ëª…ë ¹ìœ¼ë¡œ ê²½ë¡œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q: DB ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ì•Šì•„ë„ ë˜ë‚˜ìš”?**

- A: ë„¤, ê°™ì€ Docker Network ë‚´ì—ì„œë§Œ í†µì‹ í•œë‹¤ë©´ í¬íŠ¸ ë°”ì¸ë”©ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤. ë³´ì•ˆìƒ ë” ì•ˆì „í•©ë‹ˆë‹¤.
