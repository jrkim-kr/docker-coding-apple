# 핵심 정리

## 🎯 학습 목표

이 튜토리얼을 완료하면:

- Node.js로 간단한 웹서버를 만들 수 있습니다
- Docker 이미지 만들기 전에 필요한 서버 개발 과정을 이해합니다
- 실제 배포 시나리오를 통해 Docker의 필요성을 체감합니다

> 왜 이걸 먼저 배워야 할까요? 🤔
>
> Docker 명령어만 외우면 다음날 다 까먹습니다! 실제 상황에서 활용해보는 것이 진짜 학습입니다.

---

## 📚 서버란 무엇인가?

서버는 사실 매우 단순한 개념입니다:

**"누가 A라는 자료를 요청하면 A라는 자료를 보내주는 호구같은 프로그램"**

### 실제 예시들

- **유튜브 서버**: "유저가 동영상 요구하면 → 동영상을 보내주기"
- **네이버 뉴스 서버**: "유저가 뉴스 요구하면 → 뉴스를 보내주기"
- **우리가 만들 서버**: "접속하면 → 인사말을 보내주기" (호구처럼 보이지 않게!)

---

## 🛠️ 서버 만들기 4단계

### 1단계: Node.js 설치

Node.js는 자바스크립트 코드를 컴퓨터 어디서나 실행할 수 있게 해주는 프로그램입니다.

1. 구글에서 "Node.js" 검색
2. **LTS 버전** 다운로드 (가장 안정적인 버전)
3. 설치 완료

> 💡 팁: 맥이나 윈도우나 설치 방법은 동일합니다!

### 2단계: 작업 환경 준비

1. **작업용 폴더** 생성 (예: `my-server`)
2. **VSCode 에디터**로 해당 폴더 열기
3. 폴더 안에 `server.js` 파일 생성 준비

---

## 📦 라이브러리 설치 (Express)

웹서버를 쉽게 만들어주는 Express 라이브러리를 설치해봅시다.

### 터미널에서 차례대로 실행:

```bash
# 1. 라이브러리 관리 파일 생성
npm init -y

# 2. Express 라이브러리 설치
npm install express

```

성공하면 `node_modules` 폴더와 `package.json` 파일이 생성됩니다.

### 🚨 설치가 안 되는 경우 해결법

**Windows 사용자:**

```bash
# PowerShell을 관리자 모드로 실행 후
Set-ExecutionPolicy RemoteSigned

```

**Mac 사용자:**

```bash
# sudo를 앞에 붙여서 실행
sudo npm install express

```

**공통 주의사항:**

- OneDrive 폴더에서는 작업하지 마세요
- 한글 폴더명 사용 금지
- 반드시 작업폴더를 에디터로 열고 터미널 실행

---

## 💻 서버 코드 작성

`server.js` 파일에 다음 코드를 복사하여 붙여넣으세요:

```jsx
const express = require("express");
const app = express();

app.listen(8080, () => {
  console.log("서버 실행중 http://localhost:8080");
});

app.get("/", (req, res) => {
  res.send("안녕하세요! 첫 번째 서버입니다 🚀");
});
```

### 코드 설명

- `express` 라이브러리를 가져와서 사용
- `localhost:8080` 주소에 서버를 띄움
- 메인페이지(`/`)로 접속하면 인사말을 보여줌

> 개성 추가하기: "안녕하세요!" 부분을 자신만의 메시지로 바꿔보세요!

---

## 🚀 서버 실행하기

터미널에서 다음 명령어 실행:

```bash
node server.js

```

성공하면 "서버 실행중 http://localhost:8080" 메시지가 나타납니다.

### 테스트하기

1. 웹브라우저 열기
2. 주소창에 `localhost:8080` 입력
3. 여러분이 설정한 메시지가 화면에 나타나는지 확인!

### 🔄 개발 편의 기능 (선택사항)

코드 수정 시 자동으로 서버를 재시작하려면:

```bash
# nodemon 설치
npm install -g nodemon

# nodemon으로 서버 실행
nodemon server.js

```

**nodemon 설치 후 `command not found` 오류가 나는 경우:**

```bash
# 1. npm 글로벌 경로 확인
npm prefix -g

# 2. PATH에 추가 (경로는 1번 결과에 따라 조정)
echo 'export PATH=$PATH:/Users/사용자명/.npm-global/bin' >> ~/.zshrc
source ~/.zshrc

# 3. 재시도
nodemon server.js

```

---

## 🌐 실제 배포는 어떻게?

현재 서버는 여러분 컴퓨터에서만 돌아갑니다. 실제 배포하려면:

### 전통적인 방법 (귀찮고 위험한 방법)

1. AWS 같은 곳에서 서버 컴퓨터 빌리기
2. 그 컴퓨터에서 똑같이 4단계 반복
3. "서버IP주소:8080"으로 접속

### 문제점들

- 😫 **매우 귀찮음**: 컴퓨터마다 설정 반복
- 🐛 **환경 차이**: 컴퓨터마다 다른 환경으로 예상치 못한 오류
- 🔧 **유지보수 어려움**: 여러 서버 관리 복잡

---

## 🐳 Docker가 필요한 이유

Docker를 사용하면:

1. **내 환경과 코드를 이미지로 만들기**
   - 모든 설정과 코드가 하나로 패키징
   - 어떤 컴퓨터에서도 동일하게 실행
2. **간단한 배포**
   - 이미지만 옮겨서 실행
   - 환경 설정 걱정 없음

---

# 이슈

### 문제

`npm install -g nodemon` 으로 글로벌 설치했는데도 `zsh: command not found: nodemon` 오류가 남.

<img width="1046" height="396" alt="image" src="https://github.com/user-attachments/assets/d80676d6-498a-436f-93b8-181f6609eb05" />

### 원인

**npm 글로벌 패키지 경로가 PATH에 잡히지 않아서** 생기는 문제임

### 해결 방법

1. 먼저 경로 확인:

   ```bash
   npm prefix -g
   ```

   - 결과가 /Users/jrkim/.npm-global 이라면, nodemon 실행 파일은 /Users/jrkim/.npm-global/bin/nodemon 에 있음

2. PATH에 추가:

   ```bash
   echo 'export PATH=$PATH:/Users/jrkim/.npm-global/bin' >> ~/.zshrc
   source ~/.zshrc
   ```

3. 확인:

   ```bash
   nodemon -v
   ```

그리고 다시 nodemon server.js 실행하면 코드 수정 → 저장 → 새로고침하면 반영됨 (강의에서는 저장만 하면 반영이 된다는데 나는 안 됨)
